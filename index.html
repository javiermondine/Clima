<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Clima — Pronóstico en tu ciudad</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css" />
</head>
<body class="theme">
  <main class="container">
    <header class="header">
      <h1>Clima</h1>
      <p class="subtitle">Consulta el pronóstico actual por ciudad y cambia entre °C y °F</p>
    </header>

    <section class="controls">
      <form id="search-form" novalidate>
        <input id="location-input" type="text" placeholder="Ej: Buenos Aires" aria-label="Ciudad" required />
        <button class="btn" type="submit">Buscar</button>
      </form>
      <div class="toggles">
        <label class="switch">
          <input id="unit-toggle" type="checkbox" />
          <span class="slider"></span>
        </label>
        <span class="label">°C / °F</span>

        <label class="switch" title="Mostrar GIF (requiere API key de Giphy)">
          <input id="gif-toggle" type="checkbox" />
          <span class="slider"></span>
        </label>
        <span class="label">GIF</span>
      </div>
    </section>

    <section id="status" class="status">Escribe una ciudad y pulsa Buscar</section>

    <section class="settings">
      <details>
        <summary>Configurar claves (API)</summary>
        <div class="settings-grid">
          <label for="vcKeyInput">Visual Crossing key</label>
          <input id="vcKeyInput" type="text" placeholder="vc_key" />
          <label for="giphyKeyInput">Giphy key (opcional)</label>
          <input id="giphyKeyInput" type="text" placeholder="giphy_key" />
          <div class="settings-actions">
            <button id="saveKeys" class="btn" type="button">Guardar</button>
            <button id="clearKeys" class="btn ghost" type="button">Borrar</button>
          </div>
          <p class="muted small">Guardamos las claves en localStorage: 'vc_key' y 'giphy_key'. También puedes usar parámetros ?key= y ?giphy= en la URL.</p>
        </div>
      </details>
    </section>

    <section id="weather" class="weather" hidden>
      <div class="city-row">
        <h2 id="city">—</h2>
        <img id="icon" alt="icono del clima" />
      </div>
      <div class="data-row">
        <div class="temp"><span id="temp">—</span><span class="unit" id="unit-symbol">°C</span></div>
        <div class="desc" id="desc">—</div>
        <div class="hum">Humedad: <span id="hum">—</span>%</div>
      </div>
      <div id="gifWrap" class="gif-wrap" hidden>
        <img id="gif" alt="GIF del clima" />
      </div>
    </section>

    <footer class="footer">
      <p>
        Visual Crossing API • <span class="muted">Usa ?key=TU_API_KEY o guarda 'vc_key' en localStorage</span><br />
        Giphy (opcional) • <span class="muted">Usa ?giphy=TU_API_KEY o guarda 'giphy_key' en localStorage</span>
      </p>
    </footer>
  </main>

  <script type="module" src="script.js"></script>
  <script>
    // Establece automáticamente las API keys si no existen en este navegador.
    // Nota: Al estar en el cliente, estas claves serán visibles en el código fuente publicado.
    // Para ocultarlas en el repo, podemos moverlas a Secrets y generarlas en deploy (puedo configurarlo si quieres).
    try {
      if (!localStorage.getItem('vc_key')) localStorage.setItem('vc_key','VKUYDP2K2N4ZGHSK4HMA4AXXW');
      if (!localStorage.getItem('giphy_key')) localStorage.setItem('giphy_key','1iCAFiH5rwv1K60Ce3kY8CAIR2wggQqt');
    } catch (e) {}
  </script>
</body>
</html>
